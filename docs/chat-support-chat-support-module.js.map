{"version":3,"sources":["./src/app/panels/admin/chat-support/chat-support-routing.module.ts","./src/app/panels/admin/chat-support/chat-support.component.ts","./src/app/panels/admin/chat-support/chat-support.component.html","./src/app/panels/admin/chat-support/chat-area/chat-area.component.ts","./src/app/panels/admin/chat-support/chat-area/chat-area.component.html","./src/app/panels/admin/chat-support/chat-support.module.ts","./src/app/panels/admin/chat-support/online-user/online-user.component.ts","./src/app/panels/admin/chat-support/online-user/online-user.component.html"],"names":[],"mappings":"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","file":"chat-support-chat-support-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ChatSupportComponent } from './chat-support.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChatSupportComponent,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ChatSupportRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-chat-support',\r\n  templateUrl: './chat-support.component.html',\r\n  styleUrls: ['./chat-support.component.scss'],\r\n})\r\nexport class ChatSupportComponent implements OnInit {\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  sessionId;\r\n  customerId;\r\n  isOnline;\r\n  customerName;\r\n\r\n  openChat(event) {\r\n    console.log(event);\r\n    this.sessionId = event.customerSessionId;\r\n    this.customerId = event.id;\r\n    this.isOnline = event.isOnline;\r\n    this.customerName = event.customerName;\r\n  }\r\n}\r\n","<div class=\"row\">\r\n  <div class=\"col-3\">\r\n    <app-online-user (openUserChat)=\"openChat($event)\"></app-online-user>\r\n  </div>\r\n  <div class=\"col-9\">\r\n    <app-chat-area\r\n      [sessionId]=\"sessionId\"\r\n      [customerId]=\"customerId\"\r\n      [isOnline]=\"isOnline\"\r\n      [customerName]=\"customerName\"\r\n    ></app-chat-area>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  AfterViewInit,\r\n  Input,\r\n  ViewChild,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  ElementRef,\r\n  AfterViewChecked,\r\n} from '@angular/core';\r\nimport { ChatService } from '../../../../services/chat/chat.service';\r\nimport jwt_decode from 'jwt-decode';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ToastrService } from 'ngx-toastr';\r\n@Component({\r\n  selector: 'app-chat-area',\r\n  templateUrl: './chat-area.component.html',\r\n  styleUrls: ['./chat-area.component.scss'],\r\n})\r\nexport class ChatAreaComponent implements OnInit, OnChanges, AfterViewInit, AfterViewChecked {\r\n  @ViewChild('scrollframe') scrollFrame: ElementRef;\r\n  @Input() sessionId: string;\r\n  @Input() customerId: string;\r\n  @Input() isOnline: string;\r\n  @Input() customerName: string;\r\n\r\n  constructor(\r\n    private ChatService: ChatService,\r\n    private spinner: NgxSpinnerService,\r\n    private toastr: ToastrService\r\n  ) {\r\n    const token = JSON.parse(localStorage.getItem('user'))?.accessToken;\r\n    if (token) {\r\n      this.decoded = jwt_decode(token);\r\n    }\r\n    console.log(this.decoded);\r\n    this.userName = `${this.decoded.firstName} ${this.decoded.lastName}`;\r\n    this.messageForAgentListener();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // this.getMessageBySession();\r\n    console.log('initing.......');\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    console.log('agter view checked');\r\n    if (this.config.currentPage == 1) {\r\n      this.scrollToBottom();\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // this.getMessageBySession();\r\n    this.messages = [];\r\n    this.config.currentPage = 1;\r\n    this.getChatHistory();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // console.log('scroll', this.scrollFrame);\r\n    // console.log('after view init');\r\n    // this.scrollToBottom();\r\n  }\r\n\r\n  messages: any = [\r\n    // {\r\n    //   userName: 'asd',\r\n    //   userType: 'agent',\r\n    //   message: 'addasd ads',\r\n    //   customerSessionId: '12',\r\n    // },\r\n    // {\r\n    //   userName: 'asd',\r\n    //   userType: 'agent',\r\n    //   message: 'addasd ads',\r\n    //   customerSessionId: '12',\r\n    // },\r\n    // {\r\n    //   userName: 'asd',\r\n    //   userType: 'agent',\r\n    //   message: 'addasd ads',\r\n    //   customerSessionId: '12',\r\n    // },\r\n    // {\r\n    //   userName: 'asd',\r\n    //   userType: 'agent',\r\n    //   message: 'addasd ads',\r\n    //   customerSessionId: '12',\r\n    // },\r\n    // {\r\n    //   userName: 'asd',\r\n    //   userType: 'agent',\r\n    //   message: 'addasd ads',\r\n    //   customerSessionId: '12',\r\n    // },\r\n    // {\r\n    //   userName: 'asd',\r\n    //   userType: 'agent',\r\n    //   message: 'addasd ads',\r\n    //   customerSessionId: '12',\r\n    // },\r\n    // {\r\n    //   userName: 'asd',\r\n    //   userType: 'agent',\r\n    //   message: 'addasd ads',\r\n    //   customerSessionId: '12',\r\n    // },\r\n    // {\r\n    //   userName: 'asd',\r\n    //   userType: 'agent',\r\n    //   message: 'addasd ads',\r\n    //   customerSessionId: '12',\r\n    // },\r\n    // {\r\n    //   userName: 'asd',\r\n    //   userType: 'agent',\r\n    //   message: 'addasd ads',\r\n    //   customerSessionId: '12',\r\n    // },\r\n  ];\r\n\r\n  sort = {\r\n    orderBy: 'createdAt',\r\n    sort: 'DESC',\r\n  };\r\n  config = {\r\n    itemsPerPage: 10,\r\n    currentPage: 1,\r\n    totalItems: null,\r\n  };\r\n\r\n  message = '';\r\n  decoded;\r\n  userName;\r\n\r\n  messageForAgentListener() {\r\n    console.log('Observing no agent online');\r\n    this.ChatService.receiveMessageForAgent().subscribe((data) => {\r\n      if (data.customerSessionId === this.sessionId) {\r\n        this.messages.push(data);\r\n      }\r\n    });\r\n  }\r\n\r\n  sendMessageToCustomer() {\r\n    const obj = {\r\n      message: this.message,\r\n      customerSessionId: this.sessionId,\r\n    };\r\n    // console.log('Observing no agent online');\r\n    this.ChatService.sendMessageToCustomer(obj);\r\n    obj['userType'] = 'agent';\r\n    // obj['userName'] = this.userName;\r\n    this.messages.push(obj);\r\n    this.message = '';\r\n  }\r\n\r\n  getMessageBySession() {\r\n    this.messages = [];\r\n  }\r\n\r\n  scrollToBottom(): void {\r\n    const el: HTMLDivElement = this.scrollFrame.nativeElement;\r\n    el.scroll({\r\n      top: el.scrollHeight,\r\n    });\r\n  }\r\n\r\n  getChatHistory() {\r\n    this.ChatService.getChatHistory(\r\n      this.config.currentPage,\r\n      this.config.itemsPerPage,\r\n      this.sort,\r\n      this.customerId\r\n    ).subscribe(\r\n      (data) => {\r\n        this.config.totalItems = data.total;\r\n        const chatHistory = data.body;\r\n        this.messages.unshift(...chatHistory.reverse());\r\n        console.log(this.messages);\r\n        this.spinner.hide();\r\n      },\r\n      (error) => {\r\n        this.toastr.error(error.error.message, 'Error');\r\n        this.spinner.hide();\r\n      }\r\n    );\r\n  }\r\n\r\n  onScroll() {\r\n    console.log('scrolling');\r\n    // console.log(this.config.currentPage * this.config.itemsPerPage, this.messages.length);\r\n    // if (this.config.currentPage * this.config.itemsPerPage == this.messages.length) {\r\n    //   this.config.currentPage = this.config.currentPage + 1;\r\n    //   this.getChatHistory();\r\n    // }\r\n  }\r\n\r\n  onScrollUp() {\r\n    console.log('123 up');\r\n    console.log(this.config.currentPage * this.config.itemsPerPage, this.messages.length);\r\n    if (this.config.currentPage * this.config.itemsPerPage == this.messages.length) {\r\n      this.config.currentPage = this.config.currentPage + 1;\r\n      this.getChatHistory();\r\n    }\r\n  }\r\n}\r\n","<div\r\n  class=\"body\"\r\n  #scrollframe\r\n  infiniteScroll\r\n  [infiniteScrollDistance]=\"1\"\r\n  [infiniteScrollThrottle]=\"50\"\r\n  (scrolled)=\"onScroll()\"\r\n  (scrolledUp)=\"onScrollUp()\"\r\n  [scrollWindow]=\"false\"\r\n>\r\n  <!--  -->\r\n  <ng-container *ngIf=\"sessionId\">\r\n    <div class=\"container bootstrap snippets bootdey h-100\">\r\n      <div class=\"row h-100\">\r\n        <div class=\"col-md-12 bg-white d-flex flex-column justify-content-between\">\r\n          <div class=\"chat-message\">\r\n            <ul class=\"chat\">\r\n              <ng-container *ngFor=\"let message of messages\">\r\n                <li class=\"left clearfix\" *ngIf=\"message.userType === 'customer'\">\r\n                  <span class=\"chat-img pull-left\">\r\n                    <img src=\"https://bootdey.com/img/Content/user_3.jpg\" alt=\"User Avatar\" />\r\n                  </span>\r\n                  <div class=\"chat-body clearfix\">\r\n                    <div class=\"header\">\r\n                      <strong class=\"primary-font\">{{ customerName }}</strong>\r\n                      <small class=\"pull-right text-muted\"\r\n                        ><i class=\"fa fa-clock-o\"></i> 12 mins ago</small\r\n                      >\r\n                    </div>\r\n                    <p>{{ message.message }}</p>\r\n                  </div>\r\n                </li>\r\n                <li class=\"right clearfix\" *ngIf=\"message.userType === 'agent'\">\r\n                  <span class=\"chat-img pull-right\">\r\n                    <img src=\"https://bootdey.com/img/Content/user_1.jpg\" alt=\"User Avatar\" />\r\n                  </span>\r\n                  <div class=\"chat-body clearfix\">\r\n                    <div class=\"header\">\r\n                      <strong class=\"primary-font\">{{ userName }}</strong>\r\n                      <small class=\"pull-right text-muted\"\r\n                        ><i class=\"fa fa-clock-o\"></i> 13 mins ago</small\r\n                      >\r\n                    </div>\r\n                    <p>\r\n                      {{ message.message }}\r\n                    </p>\r\n                  </div>\r\n                </li>\r\n              </ng-container>\r\n            </ul>\r\n          </div>\r\n          <div class=\"chat-box bg-white\">\r\n            <div class=\"input-group\">\r\n              <input\r\n                class=\"form-control border no-shadow no-rounded\"\r\n                placeholder=\"Type your message here\"\r\n                [(ngModel)]=\"message\"\r\n                (keyup.enter)=\"sendMessageToCustomer()\"\r\n              />\r\n              <span class=\"input-group-btn\">\r\n                <button class=\"btn btn-success no-rounded\" type=\"button\">Send</button>\r\n              </span>\r\n            </div>\r\n            <!-- /input-group -->\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ChatSupportComponent } from './chat-support.component';\r\nimport { ChatSupportRoutingModule } from './chat-support-routing.module';\r\nimport { OnlineUserComponent } from './online-user/online-user.component';\r\nimport { ChatAreaComponent } from './chat-area/chat-area.component';\r\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\r\n\r\n@NgModule({\r\n  declarations: [ChatSupportComponent, OnlineUserComponent, ChatAreaComponent],\r\n  imports: [CommonModule, FormsModule, ChatSupportRoutingModule, InfiniteScrollModule],\r\n})\r\nexport class ChatSupportModule {}\r\n","import { Component, OnInit, OnDestroy, Output, EventEmitter } from '@angular/core';\r\nimport { ChatService } from '../../../../services/chat/chat.service';\r\nimport jwt_decode from 'jwt-decode';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ToastrService } from 'ngx-toastr';\r\n@Component({\r\n  selector: 'app-online-user',\r\n  templateUrl: './online-user.component.html',\r\n  styleUrls: ['./online-user.component.scss'],\r\n})\r\nexport class OnlineUserComponent implements OnInit, OnDestroy {\r\n  @Output() openUserChat = new EventEmitter<any>();\r\n  constructor(\r\n    private ChatService: ChatService,\r\n    private spinner: NgxSpinnerService,\r\n    private toastr: ToastrService\r\n  ) {\r\n    const token = JSON.parse(localStorage.getItem('user'))?.accessToken;\r\n    if (token) {\r\n      this.decoded = jwt_decode(token);\r\n    }\r\n    console.log(this.decoded);\r\n    const userName = `${this.decoded.firstName} ${this.decoded.lastName}`;\r\n    this.ChatService.setupSocketConnection('agent', userName, this.decoded.id);\r\n    this.newCustomerListner();\r\n    this.customerDisconnectedListner();\r\n    this.getChatSessions();\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n  ngOnDestroy(): void {\r\n    console.log('destroying component');\r\n    this.ChatService.closeConnection();\r\n  }\r\n  decoded: any;\r\n  customers = [];\r\n  isOnline = true;\r\n  sort = {\r\n    orderBy: 'createdAt',\r\n    sort: 'DESC',\r\n  };\r\n  config = {\r\n    itemsPerPage: 10,\r\n    currentPage: 1,\r\n    totalItems: null,\r\n  };\r\n\r\n  newCustomerListner() {\r\n    this.ChatService.newCustomer().subscribe((data) => {\r\n      data['isOnline'] = true;\r\n\r\n      delete Object.assign(data, { ['customerName']: data['name'] })['name'];\r\n      delete Object.assign(data, { ['customerEmail']: data['email'] })['email'];\r\n      delete Object.assign(data, { ['customerPhone']: data['phone'] })['phone'];\r\n      delete Object.assign(data, { ['customerSessionId']: data['socketId'] })['socketId'];\r\n\r\n      this.customers.unshift(data);\r\n      console.log(data);\r\n    });\r\n  }\r\n\r\n  customerDisconnectedListner() {\r\n    this.ChatService.customerDisconnected().subscribe((data) => {\r\n      this.customers.find((it) => it.socketId === data.socketId).isOnline = false;\r\n      console.log(data);\r\n    });\r\n  }\r\n\r\n  getChatSessions() {\r\n    this.ChatService.getChatSessions(\r\n      this.config.currentPage,\r\n      this.config.itemsPerPage,\r\n      this.sort\r\n    ).subscribe(\r\n      (data) => {\r\n        this.config.totalItems = data.total;\r\n        const sessions = data.body;\r\n\r\n        this.customers.push(...sessions);\r\n        this.spinner.hide();\r\n      },\r\n      (error) => {\r\n        this.toastr.error(error.error.message, 'Error');\r\n        this.spinner.hide();\r\n      }\r\n    );\r\n  }\r\n\r\n  onScroll() {\r\n    console.log('scrolling');\r\n    console.log(this.config.currentPage * this.config.itemsPerPage, this.customers.length);\r\n    if (this.config.currentPage * this.config.itemsPerPage == this.customers.length) {\r\n      this.config.currentPage = this.config.currentPage + 1;\r\n      this.getChatSessions();\r\n    }\r\n  }\r\n\r\n  switchStatus() {\r\n    this.isOnline = !this.isOnline;\r\n  }\r\n}\r\n","<div\r\n  class=\"body\"\r\n  infiniteScroll\r\n  [infiniteScrollDistance]=\"1\"\r\n  [infiniteScrollThrottle]=\"50\"\r\n  (scrolled)=\"onScroll()\"\r\n  [scrollWindow]=\"false\"\r\n>\r\n  <div class=\"container bootstrap snippets bootdey\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12 bg-white\">\r\n        <div\r\n          class=\"row d-flex border-bottom padding-sm p-2 justify-content-between\"\r\n          style=\"height: 40px\"\r\n        >\r\n          <b class=\"text-center p-2\">Members</b>\r\n\r\n          <div class=\"\">\r\n            <div class=\"mb-3\">\r\n              <p class=\"custom-control custom-switch custom-switch-lg\" (click)=\"switchStatus()\">\r\n                <input\r\n                  class=\"custom-control-input custom-control-input-warning\"\r\n                  id=\"isManageByOwner\"\r\n                  type=\"checkbox\"\r\n                  [(ngModel)]=\"isOnline\"\r\n                />\r\n                <label class=\"custom-control-label\" for=\"\"></label>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- =============================================================== -->\r\n        <!-- member list -->\r\n        <ul class=\"friend-list\">\r\n          <ng-container *ngFor=\"let customer of customers\">\r\n            <li class=\"active bounceInDown\" (click)=\"openUserChat.emit(customer)\">\r\n              <a class=\"clearfix\">\r\n                <img src=\"https://bootdey.com/img/Content/user_1.jpg\" alt=\"\" class=\"img-circle\" />\r\n                <div class=\"friend-name\">\r\n                  <strong>{{ customer.customerName }}</strong>\r\n                </div>\r\n                <div class=\"last-message text-muted\">Customer</div>\r\n                <!-- <small class=\"time text-muted\">Just now</small> -->\r\n                <small\r\n                  class=\"fa fa-circle chat-alert\"\r\n                  [ngClass]=\"{ online: customer.isOnline, offline: !customer.isOnline }\"\r\n                ></small>\r\n              </a>\r\n            </li>\r\n          </ng-container>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"sourceRoot":"webpack:///"}